<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Welcome to Firebase Hosting</title>
        <link href="https://fonts.googleaps.com/css?family=Roboto:300,500" rel="stylesheet">
        <link rel="stylesheet" href="style/style.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" 
            crossorigin="anonymous">

        <script src="https://www.gstatic.com/firebasejs/ui/4.5.1/firebase-ui-auth.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.5.1/firebase-ui-auth.css" />
        <link rel="stylesheet" href="style/login.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>

        <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
        <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>

        <!-- Add Firebase products that you want to use -->
        <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-firestore.js"></script>
        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyDAquTNfqjwa8bMBSzmyO_sEaeKhhq0rWQ",
                authDomain: "dis-covid.firebaseapp.com",
                databaseURL: "https://dis-covid.firebaseio.com",
                projectId: "dis-covid",
                storageBucket: "dis-covid.appspot.com",
                messagingSenderId: "93140684291",
                appId: "1:93140684291:web:b740d37d012982f706c836",
                measurementId: "G-ZNYK27S4Z4"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();
            // Initialize database
            const db = firebase.firestore();
            //db.settings({timestampsInSnapshots: true});
            //Initializes authentication
            const auth = firebase.auth();
        </script>


        <script>
            // listen for auth status changes
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    console.log('Redirecting to all_posts.html');
                    window.location.replace("all_posts.html");

                } else {
                    console.log('Not redirecting');
                }
            });
        </script>

    </head>
    <body>
        <div class="navbar">
            <a href="index.html" class="left nav-item help" id="indexHelp"><img src="images/help.png"></a>
        </div>

        <div class="login-page">
        <div class="form">
            <form id="login-form">
                <input id="login-email" type="email" placeholder="Email">
                <input id="login-password" type="password" placeholder="Password"><br>

                <button id="btnLogin" class="btn btn-action">
                    Login
                </button>
            </form>
            <form action="sign_up.html">
                <p class="message">Don't have an account? <a href="sign_up.html">Sign Up Below</a></p>
                <button>Sign Up</button>
            </form>
        </div>
        </div>

        <script src="js/app.js"></script>
        <script src="js/login.js"></script>
        <script src="js/user_status.js"></script>
        <script src="js/logout.js"></script>

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </body>
</html>