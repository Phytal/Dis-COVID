<!DOCTYPE html>
<head>
    <title>All posts!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style/style.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>

<body>
    <div class="navbar">
        <a href="#" class="left nav-item help" id="indexHelp"><img src="images/help.png"></a>
        <input type="search" placeholder="Search">
        <a href="profile.html" id="logout-link"><img src="images/profile.png" id="logout-img"></a>
        <a href="favorites.html"><img src="images/heart.png"></a>
        <a href="login.html" ><img src="images/login.png"></a>
    </div>
    <h1 id="post-result-header">These are the results for: </h1>
    <div class="container">
        <div class="row">
            <div class="col-md">
                <a id ="post-link" href="https://google.com">
                    <button class="post" id="post-one">
                        <h2 id="post-one-title">Title 1</h2>
                        <img id="post-one-img"src="https://semantic-ui.com/images/wireframe/image.png">
                        <h6 id="post-one-description">Desc 1</h6>
                    </button>
                </a>
            </div>
            <div class="col-md">
                <a id ="post-link" href="https://google.com">
                    <button class="post" id="post-two">
                        <h2 id="post-one-title">Title 2</h2>
                        <img id="post-one-img"src="https://semantic-ui.com/images/wireframe/image.png">
                        <h6 id="post-one-description">Desc 2</h6>
                    </button>
                </a>
            </div>
            <div class="col-md">
                <a id ="post-link" href="https://google.com">
                    <button class="post" id="post-two">
                        <h2 id="post-one-title">Title 3</h2>
                        <img id="post-one-img"src="https://semantic-ui.com/images/wireframe/image.png">
                        <h6 id="post-one-description">Desc 3</h6>
                    </button>
                </a>
            </div>
        </div>
    </div>

    <!--
    <a href="index.html">Go to Home</a>

    <ul id="all-posts">
    </ul>
    -->

    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-storage.js"></script>

    <!--
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyDAquTNfqjwa8bMBSzmyO_sEaeKhhq0rWQ",
            authDomain: "dis-covid.firebaseapp.com",
            databaseURL: "https://dis-covid.firebaseio.com",
            projectId: "dis-covid",
            storageBucket: "dis-covid.appspot.com",
            messagingSenderId: "93140684291",
            appId: "1:93140684291:web:b740d37d012982f706c836",
            measurementId: "G-ZNYK27S4Z4"
        };
        
        const testList = document.querySelector('#all-posts');

        function renderTest(doc) {
            //create elements in which data will be displayed
            let li = document.createElement('li');
            let image = document.createElement('img');
        
            li.setAttribute('data-id', doc.id); //first parameter is attribute name, id property is second parameter (we use document id in firestore for this)
            
            image.src = doc.data().img_url;
            //image.src = "https://firebasestorage.googleapis.com/v0/b/dis-covid.appspot.com/o/images%2Famnguyen%40stu.naperville203.org%2Fblue.png?alt=media&token=a1245c01-5731-4ae1-8313-ee1498384447";

            li.appendChild(image);
            
            //append new created list to the element that is present in index.html onload
            testList.appendChild(li);
        }

        firebase.initializeApp(firebaseConfig);
        
        const db = firebase.firestore();
        
        let postRef = db.collection('posts');
        let allPosts = postRef.get().then(snapshot => {
            snapshot.forEach(doc => {
            console.log(doc.id, '=>', doc.data().img_url);
            //document.getElementById("cool").src = doc.data().img_url;
            
            renderTest(doc);
            });
        })
        .catch(err => {
            console.log('Error getting documents', err);
        });
    </script>
    -->

</body>

